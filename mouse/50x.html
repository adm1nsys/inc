<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Лабиринт</title>

<link rel="stylesheet" type="text/css" href="btns.css">


</head>
<body>
<div class="content">
<div style="  max-width: 80rem;
  margin: auto;">

<header>
<center class="header"><b><h1>Генератор Лабіринту</h1></b></center>
<div class="p0l1">
  <div class="light1"></div>
  <div style="top: -50%;">
    <div class="light2"></div>
    <div class="light3"></div>
  </div>

</div>
<div class="h1">
  <div class="regular_btn"  onclick=""><div class="regular_btn1"><b class="regular_btn2">Генератр</b></div></div>
  <div class="regular_btn" onclick=""><div class="regular_btn1"><b class="regular_btn2">Тест</b></div></div>
  <div class="regular_btn" onclick=""><div class="regular_btn1"><b class="regular_btn2">Інформація</b></div></div>

</div>
</header>

<div id="content_gen">
  <div class="draggable"></div>
<div style="position:static; display:flex;">
<div>
  <div class="obstacle" style="top:100px; left:100px;"></div>
  <div class="obstacle0" style="top:200px; left:100px;"></div>
  <div class="obstacle" style="top:300px; left:100px;"></div>

</div>
</div>
</div>

<div style="margin:auto; width: 90%; max-width: 80rem; display: flex; flex-direction: column;">

  <h2><label for="slider_b_size">Розмір ячейки <span class="b_size">100</span>Х<span class="b_size">100</span> PX</label></h2>
  <input type="range" id="slider_b_size" name="volume" min="10" max="1000" value="100"  step="10" class="slider">



  <h2><label for="slider_b_size0">Розмір мищі <span class="m_size0">50</span>Х<span class="m_size1">100</span> PX (Ширина, Висота)</label></h2>

Ширина:<br>
    <input type="range" id="slider_m_size0" name="volume" min="10" max="1000" value="50"  step="10" class="slider">

Висота:<br>
  <input type="range" id="slider_m_size1" name="volume" min="10" max="1000" value="100"  step="10" class="slider">


  <h2>Колір 1 (Доріжка) (Формат RGBA)<div class="color-box" id="colorBox1"></div></h2>
  Колір:<br>
  <input type="color" id="color1" value="#ffffff">
  Альфа канал:<br>
  <input type="range" id="alpha1" min="0" max="255" value="255" class="slider">


  <h2>Колір 2 (Стіни) (Формат RGBA)  <div class="color-box" id="colorBox2"></div></h2>
  Колір:<br>
  <input type="color" id="color2" value="#000000">
  Альфа канал:<br>
  <input type="range" id="alpha2" min="0" max="255" value="255" class="slider">


  <h2>Колір 3 (Ціль) (Формат RGBA)  <div class="color-box" id="colorBox3"></div></h2>
  Колір:<br>
  <input type="color" id="color3" value="#ff0000">
  Альфа канал:<br>
  <input type="range" id="alpha3" min="0" max="255" value="255" class="slider">

  <h2>Ідентифікация мищі</h2>

  <div class="horizon">
      <div class="textToCopy">
          <b><span class="c0">const</span> <span class="c1">mouse_id</span> = <span class="c2">"<span id="id_inp" class="editable" contenteditable="true">id_мищі</span>"</span>;</b>
      </div>
      <div id="copyButton" class="regular_btn" style="width:auto; margin:0px; margin-left: 10px; height: 100%;">
          <div class="regular_btn1">
              <b class="regular_btn2" style="padding: 10px 10px 10px 10px;">Скопіювати</b>
          </div>
      </div>
  </div>
  <br>
<span style="opacity:0.5">Вставте цю константу першою строкою у ваш JavaScript.</span>
  <div id="textToCopy">const mouse_id = "id_мищі";</div>
  <br>
</div>

</div>

<div class="btns_c">
<button class="button btn_l btn_style" onclick="move('left')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
</svg>
</button>
<button class="button btn_t btn_style" onclick="move('up')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
</svg>
</button>
<button class="button btn_r btn_style" onclick="move('right')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
</svg>
</button>
<button class="button btn_b btn_style" onclick="move('down')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
  </svg>
</button>
</div>


</div>

</body>

<script>

document.addEventListener('DOMContentLoaded', (event) => {
const mouse_id = "id_мищі";
  var slider = document.getElementById("slider_b_size");
   var outputs = document.getElementsByClassName("b_size");
   var b_size = slider.value;

  // Обновление текущего значения при перемещении ползунка
  slider.oninput = function() {
             b_size = this.value; // Обновление переменной
             for (var i = 0; i < outputs.length; i++) {
                 outputs[i].innerHTML = b_size;
                 // console.log(b_size);
             }
         }

         var slider1 = document.getElementById("slider_m_size0");
         var slider2 = document.getElementById("slider_m_size1");
         var outputs0 = document.getElementsByClassName("m_size0");
         var outputs1 = document.getElementsByClassName("m_size1");
         var m_size0 = slider1.value;
         var m_size1 = slider2.value;

         // Обновление текущего значения при перемещении первого ползунка
         slider1.oninput = function() {
             m_size0 = this.value; // Обновление переменной
             for (var i = 0; i < outputs0.length; i++) {
                 outputs0[i].innerHTML = m_size0;
             }
         }

         // Обновление текущего значения при перемещении второго ползунка
         slider2.oninput = function() {
             m_size1 = this.value; // Обновление переменной
             for (var i = 0; i < outputs1.length; i++) {
                 outputs1[i].innerHTML = m_size1;
             }
         }

         function updateColor(colorInputId, alphaInputId, colorBoxId) {
    var color = document.getElementById(colorInputId).value;
    var alpha = document.getElementById(alphaInputId).value;
    var rgbaColor = hexToRgba(color, alpha);
    document.getElementById(colorBoxId).style.backgroundColor = rgbaColor;
}
document.getElementById("copyButton").addEventListener("click", function() {
    var text = document.querySelector(".textToCopy").innerText;
    var textArea = document.createElement("textarea");
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand("Copy");
    textArea.remove();
    alert("Текст скопирован: " + text);
});

document.getElementById("id_inp").addEventListener("input", function() {
    var editableText = this.innerText;
    document.getElementById("textToCopy").innerText = 'const mouse_id = "' + editableText + '";';
});

function hexToRgba(hex, alpha) {
    var r = parseInt(hex.slice(1, 3), 16);
    var g = parseInt(hex.slice(3, 5), 16);
    var b = parseInt(hex.slice(5, 7), 16);
    return `rgba(${r}, ${g}, ${b}, ${alpha / 255})`;
}

['color1', 'color2', 'color3'].forEach(function(colorId, index) {
    var alphaId = 'alpha' + (index + 1);
    var colorBoxId = 'colorBox' + (index + 1);
    updateColor(colorId, alphaId, colorBoxId);

    document.getElementById(colorId).oninput = function() {
        updateColor(colorId, alphaId, colorBoxId);
    };

    document.getElementById(alphaId).oninput = function() {
        updateColor(colorId, alphaId, colorBoxId);
    };
});

    const draggable = document.querySelector('.draggable'); // Изменено на выбор по классу
    const obstacles = document.querySelectorAll('.obstacle'); // Выбираем все препятствия
    let currentX = 0;
    let currentY = 0;
    const step = 10; // Шаг смещения в пикселях

    window.move = (direction) => {
        let deltaX = 0;
        let deltaY = 0;

        switch(direction) {
            case 'left':
                deltaX = -step;
                break;
            case 'right':
                deltaX = step;
                break;
            case 'up':
                deltaY = -step;
                break;
            case 'down':
                deltaY = step;
                break;
        }

        // Проверка на коллизию перед перемещением
        if (!checkCollision(currentX + deltaX, currentY + deltaY)) {
            currentX += deltaX;
            currentY += deltaY;
            draggable.style.left = currentX + 'px';
            draggable.style.top = currentY + 'px';
        }
    }

    function checkCollision(newX, newY) {
        const futureRect = draggable.getBoundingClientRect();
        futureRect.x = newX;
        futureRect.y = newY;

        // Проверяем каждое препятствие
        for (const obstacle of obstacles) {
            const obstacleRect = obstacle.getBoundingClientRect();

            if (futureRect.x < obstacleRect.x + obstacleRect.width &&
                futureRect.x + futureRect.width > obstacleRect.x &&
                futureRect.y < obstacleRect.y + obstacleRect.height &&
                futureRect.y + futureRect.height > obstacleRect.y) {
                console.log('Коллизия!');
                return true;
            }
        }
        return false;
    }
});




</script>
</html>
