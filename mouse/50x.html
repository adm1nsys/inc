<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Лабиринт</title>

<link rel="stylesheet" type="text/css" href="btns.css">


</head>
<body>
<div class="content">

<header>
<center class="header"><b><h1>Генератор Лабіринту</h1></b></center>
<div class="p0l1">
  <div class="light1"></div>
  <div style="top: -50%;">
    <div class="light2"></div>
    <div class="light3"></div>
  </div>

</div>
<div class="h1">
  <div class="regular_btn" onclick="load_g_s()"><div class="regular_btn1"><b class="regular_btn2">Генератр</b></div></div>
  <div class="regular_btn" onclick="load_g_s()"><div class="regular_btn1"><b class="regular_btn2">Інформація</b></div></div>

</div>
</header>

<div id="content_gen">
  <div class="draggable"></div>
<div style="position:static; display:flex;">
<div>
  <div class="obstacle" style="top:100px; left:100px;"></div>
  <div class="obstacle0" style="top:200px; left:100px;"></div>
  <div class="obstacle" style="top:300px; left:100px;"></div>

</div>
</div>
</div>
</div>

<div class="btns_c">
<button class="button btn_l btn_style" onclick="move('left')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
</svg>
</button>
<button class="button btn_t btn_style" onclick="move('up')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
</svg>
</button>
<button class="button btn_r btn_style" onclick="move('right')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
</svg>
</button>
<button class="button btn_b btn_style" onclick="move('down')">
  <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M320 0H192V128H128V256H64V384H0V512H128V384H192V256H256H320V384H384V512H512V384H448V256H384V128H320V0Z" fill="white"/>
  </svg>
</button>
</div>

<script>


document.addEventListener('DOMContentLoaded', (event) => {
    const draggable = document.querySelector('.draggable'); // Изменено на выбор по классу
    const obstacles = document.querySelectorAll('.obstacle'); // Выбираем все препятствия
    let currentX = 0;
    let currentY = 0;
    const step = 10; // Шаг смещения в пикселях

    window.move = (direction) => {
        let deltaX = 0;
        let deltaY = 0;

        switch(direction) {
            case 'left':
                deltaX = -step;
                break;
            case 'right':
                deltaX = step;
                break;
            case 'up':
                deltaY = -step;
                break;
            case 'down':
                deltaY = step;
                break;
        }

        // Проверка на коллизию перед перемещением
        if (!checkCollision(currentX + deltaX, currentY + deltaY)) {
            currentX += deltaX;
            currentY += deltaY;
            draggable.style.left = currentX + 'px';
            draggable.style.top = currentY + 'px';
        }
    }

    function checkCollision(newX, newY) {
        const futureRect = draggable.getBoundingClientRect();
        futureRect.x = newX;
        futureRect.y = newY;

        // Проверяем каждое препятствие
        for (const obstacle of obstacles) {
            const obstacleRect = obstacle.getBoundingClientRect();

            if (futureRect.x < obstacleRect.x + obstacleRect.width &&
                futureRect.x + futureRect.width > obstacleRect.x &&
                futureRect.y < obstacleRect.y + obstacleRect.height &&
                futureRect.y + futureRect.height > obstacleRect.y) {
                console.log('Коллизия!');
                return true;
            }
        }
        return false;
    }
});




</script>

</body>
</html>
